<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="Description" content="" />
    <meta name="Keywords" content="" />
    <title>:: 이전 관리자 ::</title>
    <link rel="stylesheet" type="text/css" href="/css/admin/main.css" />
    <link rel="stylesheet" type="text/css" href="/css/admin/wtree.css" />
</head>
<body>
    <div id="wrap" ><!--  -->
        <div id="header">
            <span><p style="padding:13px 0 0 5px;float:left;line-height:30px;"><img src="/img/admin/NHN COMMERCE_Horizontal.png" height="18px"alt="로고"></p></span>
            <span>
                <ul class="navi">
                    <li><img src="/img/admin/txt/navi1_off.gif" alt="조회" onclick='Tabmenu.FoucsSelect(this);' OnAir="N"   id="btnSelect" style="cursor:pointer"></li>
                    <li><img src="/img/admin/txt/navi2_off.gif" alt="저장"   onclick='Tabmenu.FoucsSave(this);' OnAir="N"  id="btnSave" style="cursor:pointer"></li>
                    <li><img src="/img/admin/txt/navi3_off.gif" alt="추가" onclick='Tabmenu.FoucsInsert(this);' OnAir="N"  id="btnInsert" style="cursor:pointer"></li>
                    <li><img src="/img/admin/txt/navi4_off.gif" alt="삭제" onclick='Tabmenu.FoucsDelete(this);'  OnAir="N" id="btnDelete" style="cursor:pointer"></li>
                    <li><img src="/img/admin/txt/navi5_off.gif"  alt="출력" onclick='Tabmenu.FoucsPrint(this);' OnAir="N" id="btnPrint" style="cursor:pointer"></li>
                    <li class="navi-last"><img src="/img/admin/txt/navi6_off.gif" alt="엑셀파일" onclick='Tabmenu.FoucsDownLoad(this);' OnAir="N" id="btnDownload" style="cursor:pointer"></li>
                </ul>
            </span>
            <span>
                <div class="login">

                    <div style="float:left;width:200px;"><div style="float:left;padding-top:5px;margin-right:5px;"><input type="checkbox" name="defaultMenuConf" id="defaultMenuConf" onclick="defaultMenuCheck();" value="1" /></div><div style="line-height:25px;"><label for="defaultMenuConf">접속 시 기본 업무 페이지 오픈</label></div></div>
                    <p class="btn-center" style="float:left;">
                        <span class="btn_type1_left"></span>
                        <span class="btn_type1_con"><span style=""><input type="button" class="logout" value="logout" onclick="location.href = '/account/logout'" /></span></span>
                    </p>
                </div>
            </span>
        </div> <!-- header 끝나는 div -->
        <div id="container" >
            <div class="left-menu" id="sidebar">
                <div style="width: 160px;height: 43px;padding: 8px 21px 0 20px;border-bottom: 1px solid #5662be;"><button onclick="javascript: MenuiWtree.openAll();left_resize($('#sidebar .WTree').height());" style="cursor:pointer;padding:10px;font-size:10px;border:solid 1px #bdc2e6;background:#fff;" />OPEN ALL</button>&nbsp;&nbsp;<button onclick="javascript: MenuiWtree.closeAll();left_resize($('#sidebar .WTree').height());" style="cursor:pointer;padding:10px;font-size:10px;border:solid 1px #bdc2e6;background:#fff;" />CLOSE ALL</button></div>
                <ul>
                    <li class="l-navi"  style="margin-left:-14px;">
                        <ul class="l-navi-ul" id="menu_list">
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="content" id="tabAreaLayer" >
                <div class="tab-title-box">
                    <div style="float:left;padding:20px 10px 0 10px;background:#c9cce9;height:31px;cursor:pointer;" onclick="javascript:ViewMenu(this)" id="leftMenuToggle"><img src="/img/admin/icon/ico_left_close.png" alt="메뉴 감추기"/></div>
                    <ul class="menu-tab" id="tabMenuArea"  style="min-width:500px;width:auto;height:50px;">
                    </ul>
                    <div class="tab-btn" id="tabControll">
                        <span><a onclick="Tabmenu.selView(this)" style="cursor:pointer"><img src="/img/admin/icon/check.gif"></a></span>
                        <span><a href="javascript:Tabmenu.delAll();"><img src="/img/admin/icon/close.gif"></a></span>
                    </div>
                </div>
                <!-- content -->
                <div class="iframe-box" id="iframe-box">
                    <div id="MainContent">

                    </div>
                </div>
                <!-- content -->
            </div>
        </div>


        <div id="footer" class="minWidth" style="height:35px;" >
            <p>Copyright ⓒ NHN COMMERCE Relocation Admin. All rights Reserved</p>
        </div>
        <div style="position:absolute;width:300px;background-color:#ffffff;height:100px;display:none;border:solid 2px #6600cc;padding:10px;" id="shareForm" ><h3 style="text-align:center;margin-bottom:5px;">이전 업무 공유 신규 목록 알림<div style="position:absolute;top:0;right:0;padding:5px;cursor:pointer;" id="shareFormClose">X</div></h3><div id="shareList"></div></div>
    </div>
    <script type="text/javascript" src="/js/common/jquery-3.6.0.min.js" ></script>
    <script type="text/javascript" src="/js/common/wtree.js"></script>
    <script type="text/javascript" src="/js/common/tab.js"></script>
    <script type="text/javascript" src="/js/wait/waiting.js"></script>
    <script type="text/javascript" src="/js/wait/setwait.js"></script>
    <script type="text/javascript" src="/js/common/common.js"></script>
    <script type="text/javascript" src="/js/common/frame.js"></script>
    <script>
    function ViewMenu(obj)
    {
        if (document.getElementById('sidebar').style.display == 'none') {
            $(obj).find('img').attr('src', $(obj).find('img').attr('src').replace("_open","_close"))
                .attr('alt', '메뉴 감추기');
            document.getElementById('sidebar').style.display='';
            document.getElementById('tabAreaLayer').style.marginLeft='200px';
        }
        else {
            $(obj).find('img').attr('src', $(obj).find('img').attr('src').replace("_close","_open"))
                .attr('alt', '메뉴 보이기');
            document.getElementById('sidebar').style.display='none';
            document.getElementById('tabAreaLayer').style.marginLeft='0';
        }
    }

    let Tabmenu = new _TabMenuMainClass("Tabmenu");
    Tabmenu.m_WaitObj = new WaitingDialog(WaitSetobject,"TempWinOpen");

    function LoadMenu(fthis)
    {
        var obj = MenuiWtree.getSelectedObject();
        if(obj == null)
            return;
        var bArray = obj.mButton.split(",");
        var Len = bArray.length;
        if(Len != 7)
            bArray = new Array("N","N","N","N","N","N","N");

        Tabmenu.add(new _TabMenuClass(obj.mSubject,obj.mIndex,obj.mUrl,bArray[0],bArray[1],bArray[2],bArray[3],bArray[4],bArray[5],bArray[6],obj.mIndex));
    }

    const MenuiWtree = new WTree('MenuiWtree');
    MenuiWtree.config.folderLinks = false;
    Tabmenu.m_TreeObj = MenuiWtree;

    MenuiWtree.add(0,-1,'ADMIN MENU','');
    let sucFunc = function(data) {
        data.forEach((value) => {
            MenuiWtree.add(value.menuNo,value.parentNo,value.menuName,'javascript:LoadMenu(this)',value.menuName,'','','',false,
                {
                    mIndex :value.menuNo,mSubject :value.menuName,mUrl :value.menuUrl,
                    mParent :value.parentNo,mSort :value.sort,mViewFlag :value.viewYn,
                    mUseFlag :value.useYn,mLinkType :value.linkType,mWidth :value.width,
                    mHeight :value.height,mLogin :value.loginYn,mButton :value.menuButton
                });
        })
        $('#menu_list').html('<div>' + MenuiWtree + '</div>');
        left_resize($('#sidebar .WTree').height());
        document.getElementById('sidebar').querySelectorAll('.wt_folder').forEach((obj) => {
            obj.addEventListener('click', function(){
                let sidebarResize = setInterval(function(){
                    left_resize($('#sidebar .WTree').height());
                    clearInterval(sidebarResize);
                }, 1);
            })
        })
    }
    let failFunc = function() {
        alert("menu load error");
    }
    ajaxProcess("/admin/menu/list", sucFunc, failFunc, "", "GET");

    function left_resize(hSize){
        hSize = Number(hSize)+100;
        if (hSize < 880) {
            hSize = 880;
        }
        if ($('#iframe-box').height() < hSize && $('#sidebar .WTree').height() < hSize) {
            hSize = String(hSize)+"px";
            document.getElementById('sidebar').style.height = hSize;
        }
        else if ($('#iframe-box').height() > $('#sidebar .WTree').height()) {
            document.getElementById('sidebar').style.height = $('#iframe-box').height()+"px";
        }
    }
    </script>
</body>
</html>
